## 1. Syncthing

### 1.1) Source
After extracting [syncthing bottle](https://bintray.com/linuxbrew/bottles/download_file?file_path=syncthing-1.4.0.x86_64_linux.bottle.tar.gz) the file can be found in `bin/syncthing `

The sha256sum of the downloaded tarball should match
`982b710fe714387b4ce4fb82f16a170ab20e8cda09f4609194f12496848a27ac`

### 1.2) why was this added?
The file is used by Homebrew/brew for installation of `syncthing@1.4.0`.
There is no problem when we use patchelf.rb for both patching and restoring(functionally).
Lots of binaries bottled online were patched using patchelf.
`Syncthing` case is a special case where patching happens fine but when the elf
is run, it segfaults.
[@david942j's explanation on why happens](https://github.com/david942j/patchelf.rb/issues/15#issuecomment-605767300)
A proper solution would be finding a simple work around in patchelf.rb.
due to time constraints, it is not practical to test every binary in brew
repo can be patched and executed.

**This ELF is currently used to test when `Patcher#save(patchelf_compatible: true)` is invoked, the elf patches and executes without segfault.**

### 1.3) Todo
This is a heavy binary of 20M,
if possible try to reproduce the same issue on a smaller ELF and use that ELF instead.
(and probably solve the bug while we are at it)

### 1.4) other notes
* The newer versions of syncthing don't have this problem, they ship static binaries now.
* related discussion: https://github.com/david942j/patchelf.rb/issues/15


## 2. pef-compat.elf

### 2.1) Source
A simple elf with its interpreter and rpath set.
This was generated by `pef-compat-elf.rb`

### 2.2) Why was this added?
`new_load_method` is left for future. It currently throws `NotImplementedError`.
This ELF is used to check the `r(un)path` and `interpreter` is updated
when `patchelf_compatible: true`, and by default fails with `NotImplementedError`.

### 2.3) Todo
Update `why was this added?` after implementing `new_load_method`(also remove this and the last sentence;)


## 3. libbuildid.so

### 3.1) Source
It is generated by the included Makefile.

### 3.2) Why was this added?
This is a library with the `.gnu.note.build-id` section. It is used to test note sections are correctly relocated along with note segments.


## 4. contiguous-note-sections.elf

### 4.1) Source
It is generated by the included Makefile, using the included contiguous-note-section.ld and contiguous-note-section.s files. The original source can be found at https://github.com/NixOS/patchelf/tree/0.15.0/tests.

### 4.2) Why was this added?
This covers an edge case of when there are multiple note sections back-to-back with varying alignments. This test ensures that this does not cause the patcher to error and think there are gaps.


## 5. empty-note

### 5.1) Source
This ELF is hand crafted to contain a PT_NOTE segment that has a non-zero size but does not have any sections within that segment.

### 5.2) Why was this added?
This tests backwards compatibility with older versions of the patchelf-compatible saver that could produce such binaries. This test ensures that this does not cause the patcher to error.


## 6. libbig-dynstr.debug

### 6.1) Source
This was built from sources at https://github.com/NixOS/patchelf/tree/0.15.0/tests.

To build, run `./bootstrap.sh && ./configure && make`. The binary can be found in `tests`.

### 6.2) Why was this added?
This tests a binary that only contains debug data and no dynamic section.

### 6.3) Todo
Simplify this binary's build procedure and include it in our Makefile.
